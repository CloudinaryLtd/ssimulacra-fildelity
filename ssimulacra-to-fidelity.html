<html>
    <script>

        // convert simmulacra scroe to fidelity
        // score = simulacra score
        /*
        
            From Ruby: 
                fidelity = ((Math::PI / 2) + Math.atan(Math::PI - (21 * Math::PI * score))) * 3.5292993472
                fidelity.round(5).clamp(0, 10)
        */
        let ssimulacraToFidlelity = (score) => {
            let fidelity = ((Math.PI / 2) + Math.atan(Math.PI - (21*Math.PI * score))) * 3.5292993472
            let precision = Math.pow(10,5)
            fidelity =  Math.round(fidelity * precision) /precision
            fidelity = Math.max(0, Math.min(10, fidelity))        // fidelity must not be higher than 10, or lower than 0
            return fidelity
        }

        function handler() {
            let score = document.getElementById("score").value
            let fidelity = ssimulacraToFidlelity(score)
            document.getElementById("fidelity").value = fidelity
        }
    </script>
    <body>
        <h1>Simmulacra to Fidelity Converter</h1>
        Simmulacra Score: <input id="score" onchange="handler()"> <button type="button" onclick="handler()">Convert</button><br><br>
        Fidelity: <input id="fidelity" readonly>

    </body>
</html>